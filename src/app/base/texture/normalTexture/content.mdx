# 法线贴图

## 法线贴图的类型

### object space normal map

物体空间法线贴图，法线贴图会根据物体表面的法线方向进行渲染，所以需要物体有法线信息，物体空间法线贴图通常用于物体表面细节的渲染，比如皮肤，石头等  

模型空间下的法线纹理看起来是五颜六色的，因为法线所在的坐标空间是就是模型空间，每个点存储的法线方向是各异的。

### tangent space normal map

切线空间法线贴图，法线贴图会根据物体表面的切线方向进行渲染，所以不需要物体有法线信息，切线空间法线贴图通常用于物体表面细节的渲染，比如皮肤，石头等  

切线空间下的法线纹理看起来是几乎都是浅蓝色的，因为每个法线方向所在的坐标空间是不一样的，即是表面每个点各自的切线空间，这种法线纹理其实就是储存了每个点在各自的切线空间中的法线扰动方向，如果一个点的法线是不变的，那么它在切线空间中，新的法线就是z轴，(0,0,1)，经过映射后就是(0.5,0.5,1),就是蓝色的

## 如何选择法线贴图的类型

往往是没得选，要是用切线空间法线贴图

1. 模型空间下的法线纹理是绝对法线信息；而切线空间下的法线纹理记录的是相对法线信息，即使用在不同的网格上，看起来也勉强算合理的
2. 可以进行uv动画，比如衣服的褶皱，而模型空间下的法线纹理无法进行uv动画


![repeat](https://minio.fzcode.com/unity/normal_map.png)


## 应该在切线空间计算还是世界空间计算

往往没得选，只能在世界空间计算，毕竟还有其他的参数


## 其他

还有高度纹理，待补充